<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Nathan Birrell]]></title><description><![CDATA[Software engineer, primarily focussed on Javascript web application development.]]></description><link>https://nathanbirrell.me</link><generator>RSS for Node</generator><lastBuildDate>Tue, 18 Feb 2020 10:20:03 GMT</lastBuildDate><item><title><![CDATA[Curriculum Vitae]]></title><description><![CDATA[❌  Not seeking work About Determined to make the web a better place with beautiful, maintainable, accessible and thought-out software…]]></description><link>https://nathanbirrell.me/resume/</link><guid isPermaLink="false">https://nathanbirrell.me/resume/</guid><pubDate>Wed, 05 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;small&gt;❌ &lt;strong&gt;Not seeking work&lt;/strong&gt;&lt;/small&gt;&lt;/p&gt;
&lt;!-- Available full-time from: **July 2018**. --&gt;
&lt;h2&gt;About&lt;/h2&gt;
&lt;p&gt;Determined to make the web a better place with beautiful, maintainable, accessible and thought-out software applications.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;4+ years’ software engineering experience with some of Australia’s largest companies.&lt;/li&gt;
&lt;li&gt;Primary focus on modern Javascript web-application development. In-depth experience with the React/Redux/Mobx/Webpack ecosystems. Working knowledge in React Native and Ruby on Rails.&lt;/li&gt;
&lt;li&gt;Typically thrive in empowered, self-sufficient and multidisciplinary teams. Keen interest in process, lean philosophy and improving the way we work.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Experience&lt;/h2&gt;
&lt;h3&gt;&lt;a href=&quot;https://beta.weather.bom.gov.au/&quot;&gt;Bureau of Meteorology&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Mar 2018 - present (contract)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Working on a project team to build a completely new weather experience for BOM’s general public audience.&lt;/li&gt;
&lt;li&gt;One of Australia’s &lt;a href=&quot;https://www.alexa.com/topsites/countries/AU&quot;&gt;top 40&lt;/a&gt; websites by traffic.&lt;/li&gt;
&lt;li&gt;Tooling: Typescript, React, Mobx with mobx-state-tree, Jest/Enzyme, ES6+, styled-components.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Interesting challenges:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;managing tree-structured state&lt;/li&gt;
&lt;li&gt;finding the right abstractions for reusable components&lt;/li&gt;
&lt;li&gt;working with a medium-to-large team to agree on long-term technical decisions&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a href=&quot;http://surfposeidon.io&quot;&gt;Poseidon&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;(side project, &lt;strong&gt;on hold&lt;/strong&gt;)
June 2017 - Present&lt;/p&gt;
&lt;h4&gt;Engineer/Co-founder&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Building the next generation of surf forecasting.&lt;/li&gt;
&lt;li&gt;Built on a Ruby on Rails API (my first major Rails project) and a React/Redux/Webpack client-side ecosystem.&lt;/li&gt;
&lt;li&gt;Multiple third-party integrations involved, including: NOAA, BOM, PlanetOS and Willyweather.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a href=&quot;https://www.belong.com.au&quot;&gt;Belong&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;powered by Telstra
Nov 2016 - Mar 2018&lt;/p&gt;
&lt;h4&gt;Front-end Developer&lt;/h4&gt;
&lt;p&gt;Mid-level Front-end Developer on a React/Redux/Webpack web application. Key activities:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tooling: React, Redux, Webpack, ES6/Babel, server-side React rendering&lt;/li&gt;
&lt;li&gt;Built out a hybrid native application using Expo and React Native.&lt;/li&gt;
&lt;li&gt;Onboarding new developers, maintaining Jest unit testing coverage&lt;/li&gt;
&lt;li&gt;Migration of our legacy front-end app out of an unmaintainable Knockout/JQuery set-up to a more manageable React/Redux ecosystem.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a href=&quot;http://www.deloittedigital.com/au/work&quot;&gt;Deloitte Digital&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Jan ‘14 - Nov ‘16&lt;/p&gt;
&lt;h4&gt;Front-end Developer&lt;/h4&gt;
&lt;p&gt;Website and web application builds for clients such as &lt;a href=&quot;https://www.telstra.com.au&quot;&gt;Telstra&lt;/a&gt;, &lt;a href=&quot;https://www.anz.com.au/personal/&quot;&gt;ANZ&lt;/a&gt; , &lt;a href=&quot;https://www.herbertsmithfreehills.com&quot;&gt;Herbert Smith Freehills&lt;/a&gt; , &lt;a href=&quot;https://www.racq.com.au&quot;&gt;RACQ&lt;/a&gt;, &lt;a href=&quot;https://conexus.victorianccc.org.au&quot;&gt;Victorian Comprehensive Cancer Centre&lt;/a&gt; and &lt;a href=&quot;https://qsuper.qld.gov.au&quot;&gt;QSuper&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;Front-end feature development in SCRUM delivery teams:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Regularly owned front-end estimation and delivery of user stories end-to-end with considerable complexity and time constraints.&lt;/li&gt;
&lt;li&gt;Focussed on improving quality through: objective architectural decisions and discussion, sharing ideas for writing readable and maintainable Javascript and presenting ideas back to the wider FED team.&lt;/li&gt;
&lt;li&gt;Assisted product owners, designers and UX to design solutions that maximise business value from more effective development effort.&lt;/li&gt;
&lt;li&gt;Attended conferences and completed training such as: Deloitte FED training (mostly React &amp;#x26; Angular), Pluralsight courses (i.e. Crockford’s JS Good Parts) and meetups/conferences (MelbJS, LASTConf).&lt;/li&gt;
&lt;li&gt;Helped design/introduce a feature-based Git workflow (‘git flow’) for multiple clients.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a href=&quot;http://www.theincentivelab.com&quot;&gt;The Incentive Lab&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;6m contract, 2015&lt;/p&gt;
&lt;h4&gt;Full-Stack Developer (PHP)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Part-time (and sole) full-stack PHP developer for the incentive marketing agency’s proprietary software, &lt;a href=&quot;www.theflashpointapp.com&quot;&gt;Flashpoint&lt;/a&gt;, used by sales teams at BMW, Nissan and Samsung in Australia.&lt;/li&gt;
&lt;li&gt;Technologies used: PHP, Symfony, Doctrine ORM, LAMP stack, Wordpress, Javascript/JQuery.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Freelance Projects&lt;/h3&gt;
&lt;p&gt;2013 - Dec ‘16&lt;/p&gt;
&lt;h4&gt;Developer / Digital Consultant&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Worked for myself from university as a web developer and digital consultant to small businesses.&lt;/li&gt;
&lt;li&gt;Provided services from as basic as a Wordpress/Squarespace build to a custom Rails application.&lt;/li&gt;
&lt;li&gt;Clients: &lt;a href=&quot;http://damgargroup.com.au/&quot;&gt;Damgar Group&lt;/a&gt;, &lt;a href=&quot;http://gaffneys.com.au/&quot;&gt;Gaffneys Logistics&lt;/a&gt;, &lt;a href=&quot;http://serenityfaceandbody.com.au/&quot;&gt;Serenity Face &amp;#x26; Body&lt;/a&gt;, All City Bathrooms &amp;#x26; Kitchens, Memla Landscape Architects&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Apple Retail&lt;/h3&gt;
&lt;p&gt;2014 (Mobile Device Technician)&lt;/p&gt;
&lt;h2&gt;Interests&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Heavy focus on best practices in software development: writing reusable, readable and maintainable code, continuous improvement and quality (through pull requests, pair programming and regular team catch-ups). Opinions heavily influenced by the &lt;a href=&quot;http://rubyonrails.org/doctrine/&quot;&gt;Rails Doctrine&lt;/a&gt;, &lt;a href=&quot;https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882&quot;&gt;Clean Code&lt;/a&gt; and &lt;a href=&quot;http://eloquentjavascript.net/&quot;&gt;Eloquent JS&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Strong interest in wider front-end community involvement and contributing back to open source projects. Regular attendee at MelbJS and Ruby Melbourne meetups. Participant in &lt;a href=&quot;https://hacktoberfest.digitalocean.com/&quot;&gt;Hacktoberfest&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Managing teams and workflows around building software. Inspired by many things/people, to name a few: &lt;a href=&quot;http://agilemanifesto.org/&quot;&gt;Agile manifesto&lt;/a&gt;, Lean philosophy, &lt;a href=&quot;https://m.signalvnoise.com/&quot;&gt;Basecamp&lt;/a&gt;, &lt;a href=&quot;https://www.amazon.com/Hard-Thing-About-Things-Building/dp/0062273205&quot;&gt;Ben Horowitz&lt;/a&gt;, &lt;a href=&quot;http://sethgodin.typepad.com/&quot;&gt;Seth Godin&lt;/a&gt; and &lt;a href=&quot;http://www.paulgraham.com/articles.html&quot;&gt;Paul Graham&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Outside of work I generally spend &lt;a href=&quot;https://instagram.com/nathanbirrell&quot;&gt;well away from my computer&lt;/a&gt; (mainly surfing/camping).&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Skills&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Javascript, ES6, Typescript&lt;/li&gt;
&lt;li&gt;React/Redux/Mobx front-end ecosystem&lt;/li&gt;
&lt;li&gt;Git &amp;#x26; git-flow&lt;/li&gt;
&lt;li&gt;Webpack, Babel&lt;/li&gt;
&lt;li&gt;React Native &amp;#x26; Expo&lt;/li&gt;
&lt;li&gt;Ruby &amp;#x26; Rails&lt;/li&gt;
&lt;li&gt;Jest/Enzyme unit testing&lt;/li&gt;
&lt;li&gt;Figma, Sketch, Photoshop, Illustrator&lt;/li&gt;
&lt;li&gt;HTML, CSS, Sass&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Education&lt;/h2&gt;
&lt;h4&gt;RMIT University&lt;/h4&gt;
&lt;p&gt;2012 - 2015&lt;/p&gt;
&lt;h4&gt;Bachelor of Business (Information Systems) (Applied) (minor in Marketing)&lt;/h4&gt;
&lt;h2&gt;Contact&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/in/nathanbirrell&quot;&gt;LinkedIn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;mailto:nathanbirrell@gmail.com&quot;&gt;nathanbirrell@gmail.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Composition in mobx-state-tree]]></title><description><![CDATA[One part of building state management in mobx-state-tree that isn’t immediately obvious when starting, is composition. Usually you come…]]></description><link>https://nathanbirrell.me/notes/composition-mobx-state-tree/</link><guid isPermaLink="false">https://nathanbirrell.me/notes/composition-mobx-state-tree/</guid><pubDate>Tue, 14 Aug 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;One part of building state management in mobx-state-tree that isn’t immediately obvious when starting, is composition. Usually you come across this issue when you want to share logic between multiple stores.&lt;/p&gt;
&lt;p&gt;While mobx-state-tree (MST) doesn’t quite provide inheritance (in the way of &lt;code class=&quot;language-text&quot;&gt;extends&lt;/code&gt;), it does provide a little &lt;code class=&quot;language-text&quot;&gt;compose&lt;/code&gt; method that can be used for similar means. In effect, it &lt;a href=&quot;https://github.com/mobxjs/mobx-state-tree#simulate-inheritance-by-using-type-composition&quot;&gt;simulates inheritance&lt;/a&gt; by composing two models together.&lt;/p&gt;
&lt;h2&gt;Usage&lt;/h2&gt;
&lt;p&gt;Composing two stores is as simple as:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; AppleStore &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; types
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compose&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    FruitStore&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    AppleModel&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;named&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;AppleStore&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;Example: compose a reusable base API store&lt;/h3&gt;
&lt;p&gt;Consider an application with many calls to different resources on an API, one that fetches Products and Posts. Rather that having duplicate code that handles loading/error/success logic and views between Products and Posts, we could compose them with an ApiStore.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;stores/ApiStore.ts&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Shared model attributes between Products and Posts&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  isLoading&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  hasFetched&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  error&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;maybe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ApiError&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Views&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; any&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hasError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;error
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ... and other shared views here, for example, hasData() might check if there are items in a self.data array&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Actions&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; any&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Note: the flow() and generator function is MST&apos;s way of handling asynchronous actions&lt;/span&gt;
  fetch&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;flow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;endpoint&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; parameters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; object &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;loading &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Note: for the sake of example, YourTransportLayer constructs a URL and performs a window.fetch()&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt; YourTransportLayer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;endpoint&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; parameters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

      self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onFetchSuccess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// callback to be overriden in composed model&lt;/span&gt;

      self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;error &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;error &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; error

      self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onFetchError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// callback to be overriden in composed model&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// ... any logging, etc.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isLoading &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
      self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hasFetched &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// If you like, you could create the callbacks `onFetchSuccess` and `onFetchError` with a simple error log to remind you to define these in your Products and Posts models&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ApiStore &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; types
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;ApiStore&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Views&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;actions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Actions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; ApiStore&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Now that you have your base API store, you can compose it with the stores that need it.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;stores/ProductStore.ts&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Product &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Product&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  category&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;number&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  onSale&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boolean&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  price&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;number&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Define things that are Product-store-specific&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Product&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Views&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; any&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  recent&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// sort by recent products&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  onSale&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// get products on sale&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Actions&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; any&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  getProducts&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// run the ApiStore fetch method&lt;/span&gt;
    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/products&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// these are the callbacks that ApiStore runs&lt;/span&gt;
  onFetchSuccess&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;products
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  onFetchError&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// do something...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// the Product-only part of the store&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Products &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; types
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Products&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Views&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;actions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Actions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Finally, compose the ApiStore with the Proucts store&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ProductStore &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; types
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compose&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    ApiStore&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    Products&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;named&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;ProductStore&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; ProductStore&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Considerations&lt;/h2&gt;
&lt;p&gt;A few tradeoffs that come with using &lt;code class=&quot;language-text&quot;&gt;.compose&lt;/code&gt; include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Readability: it’s not quite obvious that &lt;code class=&quot;language-text&quot;&gt;ProductStore&lt;/code&gt; is composed with &lt;code class=&quot;language-text&quot;&gt;ApiStore&lt;/code&gt;, until the very end of the file. This can impact readability in a way you wouldn’t get if we were working with ES6 classes.&lt;/li&gt;
&lt;li&gt;Typing issues: &lt;code class=&quot;language-text&quot;&gt;ProductStore&lt;/code&gt; doesn’t exactly know that &lt;code class=&quot;language-text&quot;&gt;ApiStore&lt;/code&gt; methods are in scope, until it’s composed, so typing on &lt;code class=&quot;language-text&quot;&gt;self&lt;/code&gt; can be tricky. This is an &lt;a href=&quot;https://github.com/mobxjs/mobx-state-tree#typing-self-in-actions-and-views&quot;&gt;existing consideration&lt;/a&gt; with MST, composition aside.&lt;/li&gt;
&lt;li&gt;Potentially easy to forget to create those callbacks (like &lt;code class=&quot;language-text&quot;&gt;onFetchSuccess&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;This isn’t &lt;em&gt;inheritance&lt;/em&gt;, unfortunately.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Overall, this pattern should help keep your MST stores DRY, quicker to write and less error-prone.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Building a reusable, customisable and composable React components]]></title><description><![CDATA[TODO: proper intro Recently been building out a simple expand collapse component with  reuse ,  cusomisation  and  composition  in mind…]]></description><link>https://nathanbirrell.me/notes/reusable-composable-react-components/</link><guid isPermaLink="false">https://nathanbirrell.me/notes/reusable-composable-react-components/</guid><pubDate>Fri, 08 Jun 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;TODO: proper intro&lt;/p&gt;
&lt;p&gt;Recently been building out a simple expand collapse component with &lt;em&gt;reuse&lt;/em&gt;, &lt;em&gt;cusomisation&lt;/em&gt; and &lt;em&gt;composition&lt;/em&gt; in mind. Shouldn’t be that difficult right?&lt;/p&gt;
&lt;p&gt;Challenges:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Reusability&lt;/strong&gt;: have it manage its own open/close states, hold it’s own core styles and accessibility features. This reduces overhead of implementing the &lt;code class=&quot;language-text&quot;&gt;Expandable&lt;/code&gt; for users of the component.&lt;/li&gt;
&lt;li&gt;Allow it to be &lt;strong&gt;customisable&lt;/strong&gt; when necessary, so that special implementations stay DRY but not overly limited in how it is styled or how the DOM structure looks.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Composable&lt;/strong&gt; in the sense that the component, when used, reads like a logical set of subcomponents. For example, a wrapper &lt;code class=&quot;language-text&quot;&gt;&amp;lt;Expandable&amp;gt;&lt;/code&gt; might have it’s &lt;code class=&quot;language-text&quot;&gt;&amp;lt;Expandable.Header&amp;gt;&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;&amp;lt;Expandable.Content&amp;gt;&lt;/code&gt; within it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Although you could, don’t use &lt;code class=&quot;language-text&quot;&gt;React.Context&lt;/code&gt; - this is &lt;a href=&quot;https://reactjs.org/docs/context.html#when-to-use-context&quot;&gt;not what this API is designed for&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Option #1 Pass individual render props&lt;/h2&gt;
&lt;p&gt;A very simple approach to this problem would be to pass a few render props to an &lt;code class=&quot;language-text&quot;&gt;Expandable&lt;/code&gt; component. Passing &lt;code class=&quot;language-text&quot;&gt;renderHeader&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;renderContent&lt;/code&gt; as props would work, then let the component handle where and when (i.e. show content when visible is toggled to true) things are displayed.&lt;/p&gt;
&lt;p&gt;The tradeoff here is that it’s not very customisable. For example, if I want to change where the &lt;em&gt;content&lt;/em&gt; renders (i.e. on-top of the Header, not below) I either need to do that for &lt;em&gt;all&lt;/em&gt; or create a varation with another prop (which could get messy with too many variations).&lt;/p&gt;
&lt;h2&gt;Option #2 Higher-Order Component&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://reactjs.org/docs/higher-order-components.html&quot;&gt;Higher-Order Components&lt;/a&gt; (HOCs) are common patterns in React. Applying them to this context can solve our customisation problem. Essentially, it would allow us to abstract-out our toggle functionality (via &lt;code class=&quot;language-text&quot;&gt;withExpandable&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;isOpen&lt;/code&gt; state and other things that &lt;code class=&quot;language-text&quot;&gt;Expandable&lt;/code&gt; has that custom variations would need.&lt;/p&gt;
&lt;!-- Pros:
 - Customisable
 - DRY

Cons:
 - HOCs aren&apos;t overly obvious when used
 - Difficult to enforce consistency --&gt;
&lt;p&gt;Implementing the &lt;code class=&quot;language-text&quot;&gt;withExpandable&lt;/code&gt; HOC is actually fairly straightforward. At its core, it’s a function that takes a component and returns a component &lt;em&gt;with expandable functionality&lt;/em&gt; (things like the open state and toggle function).&lt;/p&gt;
&lt;p&gt;What you don’t get with this take is the consistency that a prop-driven component gets, but you definitely get plenty of customisability. For example, we know in every use case the &lt;code class=&quot;language-text&quot;&gt;Header&lt;/code&gt; will be a button element, we want this to be built-in and not have to remember to implement this for each usage. To mitigate &lt;em&gt;some&lt;/em&gt; of that lacking consistency, I’ve also added imports for a header and content components, wherein transitions, accessibilty, DOM elements and all can be defined in a consistent manner.&lt;/p&gt;
&lt;p&gt;The other tradeoff to consider here is that HOCs in general aren’t overly obvious when used, depending on where you apply them.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://codepen.io/nathanbirrell/pen/oyNROL&quot;&gt;https://codepen.io/nathanbirrell/pen/oyNROL&lt;/a&gt;&lt;/p&gt;
&lt;!-- &lt;p data-height=&quot;265&quot; data-theme-id=&quot;dark&quot; data-slug-hash=&quot;oyNROL&quot; data-default-tab=&quot;js,result&quot; data-user=&quot;nathanbirrell&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Expandable: HOC&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/nathanbirrell/pen/oyNROL/&quot;&gt;Expandable: HOC&lt;/a&gt; by Nathan Birrell (&lt;a href=&quot;https://codepen.io/nathanbirrell&quot;&gt;@nathanbirrell&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;script async src=&quot;https://static.codepen.io/assets/embed/ei.js&quot;&gt;&lt;/script&gt; --&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;withExpandable&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WrappedComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;extends&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PureComponent &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      isOpen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;toggleOpen&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isOpen &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;WrappedComponent
        isOpen&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isOpen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        toggleOpen&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;WrappedComponent&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; CustomExpandable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;withExpandable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;extends&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; toggleOpen &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* NOTE: in here you&apos;d likely recycle a few Expandable subcomponents, like Expandable.Header and Expandable.Content */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Click me&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Hellooooooooooooooooooooooooooooooooooooooooooooooooooo&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Option #3 Render Prop Pattern (or, FACCs)&lt;/h2&gt;
&lt;p&gt;Also known as Function as Child Component (FACC)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Don’t render &lt;code class=&quot;language-text&quot;&gt;children&lt;/code&gt; as a function prop (antipattern!)&lt;/li&gt;
&lt;li&gt;pass &lt;code class=&quot;language-text&quot;&gt;render&lt;/code&gt; function prop&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Expandable contains the reusable functionality/props used by different implementations of it. It takes a render prop as a way of managing the cross-cutting concerns.&lt;/p&gt;
&lt;p&gt;Pros:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;More obvious in render method that Expandable is wrapping this CustomExpandable component&lt;/li&gt;
&lt;li&gt;Looks more “composable” (than a HOC)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Edge case with PureComponents to be aware of &lt;a href=&quot;https://reactjs.org/docs/render-props.html#be-careful-when-using-render-props-with-reactpurecomponent&quot;&gt;https://reactjs.org/docs/render-props.html#be-careful-when-using-render-props-with-reactpurecomponent&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Decreased testability (read &lt;a href=&quot;https://medium.com/@PhilippSpo/i-agree-with-all-of-the-above-and-after-this-pitch-i-am-sold-on-render-prop-components-more-than-9e0e4305a4bf&quot;&gt;https://medium.com/@PhilippSpo/i-agree-with-all-of-the-above-and-after-this-pitch-i-am-sold-on-render-prop-components-more-than-9e0e4305a4bf&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Read more:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Render props (React docs) &lt;a href=&quot;https://reactjs.org/docs/render-props.html&quot;&gt;https://reactjs.org/docs/render-props.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;FaCCs as antipattern &lt;a href=&quot;https://americanexpress.io/faccs-are-an-antipattern/&quot;&gt;https://americanexpress.io/faccs-are-an-antipattern/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://codepen.io/nathanbirrell/pen/vrEzWv&quot;&gt;https://codepen.io/nathanbirrell/pen/vrEzWv&lt;/a&gt;&lt;/p&gt;
&lt;!-- &lt;p data-height=&quot;265&quot; data-theme-id=&quot;dark&quot; data-slug-hash=&quot;vrEzWv&quot; data-default-tab=&quot;js,result&quot; data-user=&quot;nathanbirrell&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Expandable: Render Prop&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/nathanbirrell/pen/vrEzWv/&quot;&gt;Expandable: Render Prop&lt;/a&gt; by Nathan Birrell (&lt;a href=&quot;https://codepen.io/nathanbirrell&quot;&gt;@nathanbirrell&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;script async src=&quot;https://static.codepen.io/assets/embed/ei.js&quot;&gt;&lt;/script&gt; --&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Expandable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PureComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      isOpen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;toggleOpen&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isOpen &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isOpen&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CustomExpandable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; toggleOpen &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Expandable
        render&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isOpen&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Fragment&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* NOTE: in here you&apos;d likely recycle a few Expandable subcomponents, like Expandable.Header and Expandable.Content */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Click me&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Hellooooooooooooooooooooooooooooooooooooooooooooooooooo&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Fragment&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Option #4 Component Injection&lt;/h2&gt;
&lt;p&gt;In this case, the &lt;code class=&quot;language-text&quot;&gt;Expandable&lt;/code&gt; component receives Header and Content as &lt;em&gt;component&lt;/em&gt; props (known as Component Injection).&lt;/p&gt;
&lt;p&gt;Pros:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Very obvious in render method that Expandable is wrapping this CustomExpandable component&lt;/li&gt;
&lt;li&gt;Looks most “composable”&lt;/li&gt;
&lt;li&gt;Should work very well with component prop types&lt;/li&gt;
&lt;li&gt;Fairly nice namespacing&lt;/li&gt;
&lt;li&gt;Enforces structure at the Expandable level, rather than the custom implementation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Maybe not as customisable? ie: if I want Content to render before Header, I can’t. NOTE: could be mitigated with a renderProp ;)&lt;/li&gt;
&lt;li&gt;You have to write out separate components for each prop (is this even a con?)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Read more:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Intro to this concept &lt;a href=&quot;https://americanexpress.io/faccs-are-an-antipattern/#component-injection---a-better-solution&quot;&gt;https://americanexpress.io/faccs-are-an-antipattern/#component-injection---a-better-solution&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://codepen.io/nathanbirrell/pen/gKbddV&quot;&gt;https://codepen.io/nathanbirrell/pen/gKbddV&lt;/a&gt;&lt;/p&gt;
&lt;!-- &lt;p data-height=&quot;265&quot; data-theme-id=&quot;dark&quot; data-slug-hash=&quot;gKbddV&quot; data-default-tab=&quot;js,result&quot; data-user=&quot;nathanbirrell&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Expandable: Component Injection&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/nathanbirrell/pen/gKbddV/&quot;&gt;Expandable: Component Injection&lt;/a&gt; by Nathan Birrell (&lt;a href=&quot;https://codepen.io/nathanbirrell&quot;&gt;@nathanbirrell&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;script async src=&quot;https://static.codepen.io/assets/embed/ei.js&quot;&gt;&lt;/script&gt; --&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Expandable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PureComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      isOpen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;toggleOpen&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isOpen &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isOpen &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      Header&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      Content&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; propsForInjectedComponents &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      isOpen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; isOpen&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// TODO: maybe check for a props.render() here, if it exists, render that instead!&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Header &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;propsForInjectedComponents&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;isOpen &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Content &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;propsForInjectedComponents&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CustomExpandable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;ExpandableHeader&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isOpen&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Click me&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Pass isOpen and toggleOpen if needed&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;ExpandableContent&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isOpen&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; toggleOpen&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Hellooooooooooooooooooooooooooooooooooooooooooooooooooo&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Expandable
        Header&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ExpandableHeader&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Content&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ExpandableContent&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;TODO: conclude&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Use React's defaultProps with Typescript strictNullChecks]]></title><description><![CDATA[Getting React’s defaultProps to play nicely with Typescript’s  strictNullChecks  can be a bit of a pain. Errors like this will pop up…]]></description><link>https://nathanbirrell.me/notes/typescript-react-defaultprops/</link><guid isPermaLink="false">https://nathanbirrell.me/notes/typescript-react-defaultprops/</guid><pubDate>Fri, 18 May 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Getting React’s defaultProps to play nicely with Typescript’s &lt;a href=&quot;https://www.tsmean.com/articles/learn-typescript/strict-null-checks-best-practice/&quot;&gt;strictNullChecks&lt;/a&gt; can be a bit of a pain. Errors like this will pop up: &lt;code class=&quot;language-text&quot;&gt;error TS2322: Type &amp;#39;string | undefined&amp;#39; is not assignable to type &amp;#39;string&amp;#39;&lt;/code&gt;, because your Prop interface has an optional property on it. Even though at runtime you know the optional prop on your component will exist.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;NOTE: This issue is &lt;a href=&quot;https://github.com/Microsoft/TypeScript/issues/23812&quot;&gt;currently being worked on&lt;/a&gt; by Typescript, so hopefully this workaround isn’t required for too long.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Hack&lt;/h2&gt;
&lt;p&gt;The quickest (hacky) way to avoid this error is to use the TS not-null operator (&lt;code class=&quot;language-text&quot;&gt;!&lt;/code&gt;). For example: &lt;code class=&quot;language-text&quot;&gt;this.props.myOptionalProp!&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Better&lt;/h2&gt;
&lt;p&gt;A better solution, however, to avoid abusing the not-null operator, but still retain good typechecking would be:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;define the &lt;code class=&quot;language-text&quot;&gt;Prop&lt;/code&gt; interface as normal, with the optional properties&lt;/li&gt;
&lt;li&gt;define a new interface for &lt;code class=&quot;language-text&quot;&gt;DefaultProps&lt;/code&gt;, where each property is required&lt;/li&gt;
&lt;li&gt;create a new type &lt;code class=&quot;language-text&quot;&gt;PropsWithDefaults&lt;/code&gt; (using &lt;a href=&quot;https://www.typescriptlang.org/docs/handbook/advanced-types.html#intersection-types&quot;&gt;intersection types&lt;/a&gt;) consisting of &lt;code class=&quot;language-text&quot;&gt;Props&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;DefaultProps&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;assign your component &lt;code class=&quot;language-text&quot;&gt;defaultProps&lt;/code&gt; as normal&lt;/li&gt;
&lt;li&gt;when destructuring your props in &lt;code class=&quot;language-text&quot;&gt;render&lt;/code&gt;, use &lt;a href=&quot;https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions&quot;&gt;type assertion&lt;/a&gt; on &lt;code class=&quot;language-text&quot;&gt;this.props&lt;/code&gt; to the new &lt;code class=&quot;language-text&quot;&gt;PropsWithDefaults&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Props&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  requiredProp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  optionalProp&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultProps&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  optionalProp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Intersection type of both Props interface and DefaultProps&lt;/span&gt;
type PropsWithDefaults &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Props &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; DefaultProps&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PureComponent&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Props&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; defaultProps&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; DefaultProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Setting defaultProps as normal&lt;/span&gt;
    optionalProp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;None&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Asserting type PropsWithDefaults to `this.props`&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; requiredProp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; optionalProp &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; PropsWithDefaults&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;requiredProp&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;optionalProp&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/issues/11640#issuecomment-295155472&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Accept any property in a Typescript interface (for use on component props)]]></title><description><![CDATA[Sometimes we have core React componentry that passes all props given to it, down to a base DOM UI element. For example, a button element…]]></description><link>https://nathanbirrell.me/notes/typescript-accept-any-prop/</link><guid isPermaLink="false">https://nathanbirrell.me/notes/typescript-accept-any-prop/</guid><pubDate>Wed, 09 May 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Sometimes we have core React componentry that passes all props given to it, down to a base DOM UI element. For example, a button element, whilst it may accept a few &lt;em&gt;known&lt;/em&gt; props (ie: variations on a button, &lt;code class=&quot;language-text&quot;&gt;type={&amp;#39;primary&amp;#39;}&lt;/code&gt;) it probably also passes any other &lt;em&gt;unknown&lt;/em&gt; props down to the base UI element (ie: &lt;code class=&quot;language-text&quot;&gt;aria-label&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;To achieve this in Typescript, we can add an &lt;a href=&quot;https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#strict-object-literal-assignment-checking&quot;&gt;indexer&lt;/a&gt; to our interface. This is simply a property on the interface that accepts any given property from an object literal. It is still good practice to specify known properties in the interface, &lt;em&gt;especially ones used inside the component itself&lt;/em&gt;, not just the props that get spread to the underlying element.&lt;/p&gt;
&lt;h2&gt;Example on a React component with object destructuring&lt;/h2&gt;
&lt;p&gt;Combine the indexer with &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Object_destructuring&quot;&gt;object destructuring&lt;/a&gt; and the &lt;a href=&quot;https://github.com/tc39/proposal-object-rest-spread&quot;&gt;rest/spread operator&lt;/a&gt;, the result is a fairly elegant solution. Take our simple Button component for example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IProps&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  onClick&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Function
  type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// &apos;Indexer&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; any
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PureComponent&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;IProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      onClick&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      type&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;otherProps &lt;span class=&quot;token comment&quot;&gt;// Assume any other props are for the base element&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props

    &lt;span class=&quot;token comment&quot;&gt;// do stuff with the type...&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button
        onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;otherProps&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Spread those otherProps&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;This is a reasonable approach to avoid Typescript complaining about type mismatches for unknown props, while still getting the autocomplete and all on the &lt;em&gt;known&lt;/em&gt; props for a component.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Test internal state of higher-order components with Enzyme]]></title><description><![CDATA[When testing your store-connected containers (be those in Mobx or Redux or any state management library) you may have noticed you can’t…]]></description><link>https://nathanbirrell.me/notes/enzyme-test-hoc-state/</link><guid isPermaLink="false">https://nathanbirrell.me/notes/enzyme-test-hoc-state/</guid><pubDate>Fri, 04 May 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;When testing your store-connected containers (be those in Mobx or Redux or any state management library) you may have noticed you can’t access that component’s internal state or instance methods. This is because they’re wrapped as &lt;a href=&quot;https://reactjs.org/docs/higher-order-components.html&quot;&gt;higher-order components&lt;/a&gt; (HOC).&lt;/p&gt;
&lt;p&gt;Of course, in order to test thoroughly, we often need access to the internal state.&lt;/p&gt;
&lt;h2&gt;Library-agnostic solution&lt;/h2&gt;
&lt;p&gt;Define your React component separately from the HOC one, export the HOC as default (for use in your app) and use a named export for the component (for your tests). Then Enzyme provides a &lt;a href=&quot;http://airbnb.io/enzyme/docs/api/ReactWrapper/instance.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;instance()&lt;/code&gt;&lt;/a&gt; method to get the mounted instance’s state (for example: &lt;code class=&quot;language-text&quot;&gt;wrapper.instance().state&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;It’s probably a good idea to use a naming convention to split them up, maybe something like a &lt;code class=&quot;language-text&quot;&gt;Hoc&lt;/code&gt; suffix, ie: &lt;code class=&quot;language-text&quot;&gt;AccountContainerHoc&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A Mobx with decorators example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AccountContainer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Account stuff...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

@&lt;span class=&quot;token function&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;store&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
@observer
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AccountContainerHoc&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AccountContainer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; defualt AccountContainerHoc&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Then in your test somewhere, access state like so:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; AccountContainer &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.&apos;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; wrapper &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;AccountContainer &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;wrapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;someValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toBe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Mobx alternative&lt;/h2&gt;
&lt;p&gt;If rewriting your store container definitions is too painful, a quick helper for Mobx users is: &lt;code class=&quot;language-text&quot;&gt;AccountContainer.instance().wrappedInstance&lt;/code&gt;. This should give you access to the internals.&lt;/p&gt;
&lt;h2&gt;Redux alternative&lt;/h2&gt;
&lt;p&gt;It &lt;a href=&quot;https://github.com/airbnb/enzyme/issues/1002#issuecomment-310796612&quot;&gt;appears&lt;/a&gt; when shallow-rendering (preferable when testing these components anyway) you can use the &lt;a href=&quot;http://airbnb.io/enzyme/docs/api/ShallowWrapper/dive.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;.dive()&lt;/code&gt;&lt;/a&gt; method, although I haven’t tested this.&lt;/p&gt;
&lt;p&gt;Usually it’s easier to follow the pattern mentioned above anyway with Redux (and no decorators), because you can export your react component like above, and simply &lt;code class=&quot;language-text&quot;&gt;export default&lt;/code&gt; your &lt;code class=&quot;language-text&quot;&gt;connect&lt;/code&gt;ed container.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Test window-bound events on React components using Enzyme/Jest]]></title><description><![CDATA[Enzyme is built for testing  React components , it handles React’s synthetic event system quite well (things like   events, for example…]]></description><link>https://nathanbirrell.me/notes/enzyme-window-events/</link><guid isPermaLink="false">https://nathanbirrell.me/notes/enzyme-window-events/</guid><pubDate>Fri, 27 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Enzyme is built for testing &lt;em&gt;React components&lt;/em&gt;, it handles React’s synthetic event system quite well (things like &lt;code class=&quot;language-text&quot;&gt;onClick&lt;/code&gt; events, for example).&lt;/p&gt;
&lt;p&gt;But what happens when you want to test event handlers that must be bound to the &lt;code class=&quot;language-text&quot;&gt;window&lt;/code&gt;? Interactive components often require these, for &lt;code class=&quot;language-text&quot;&gt;keydown&lt;/code&gt; events and so on.&lt;/p&gt;
&lt;p&gt;A quick solution is to mock the &lt;code class=&quot;language-text&quot;&gt;window.addEventListener&lt;/code&gt; function implmentation and use it to assign each callback to an object that is easy to call in your tests, to simulate those events firing.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Set-up event listener mock&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;addEventListener &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;genMockFn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mockImpl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; callback&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; callback&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Mount component that has set callback for keydown event&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; component &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SomeComponent &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Trigger keydown event&lt;/span&gt;
map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keydown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Escape&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/airbnb/enzyme/issues/426#issuecomment-253515886&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Define key types in Typescript interfaces]]></title><description><![CDATA[Use bracket notation to define  key  types on Typescript interfaces. This is useful on key-driven data structures. For example, if we have…]]></description><link>https://nathanbirrell.me/notes/typescript-key-types/</link><guid isPermaLink="false">https://nathanbirrell.me/notes/typescript-key-types/</guid><pubDate>Fri, 20 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Use bracket notation to define &lt;em&gt;key&lt;/em&gt; types on Typescript interfaces. This is useful on key-driven data structures.&lt;/p&gt;
&lt;p&gt;For example, if we have an object of &lt;code class=&quot;language-text&quot;&gt;PositionError&lt;/code&gt;s, where the key is our numeric error code and the value is an object with information about the error type.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IErrorType&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;number&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    code&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// For example:&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; PositionError&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;IErrorType &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    code&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;PERMISSION_DENIED&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Please allow permission&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    code&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;POSITION_UNAVAILABLE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Something went wrong :(&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[Clean Javascript]]></title><description><![CDATA[This is a transcript from  a presentation  I gave on  Clean Code , applied to Javascript applications. This post is inspired by Martin…]]></description><link>https://nathanbirrell.me/notes/clean-js/</link><guid isPermaLink="false">https://nathanbirrell.me/notes/clean-js/</guid><pubDate>Mon, 10 Oct 2016 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;This is a transcript from &lt;a href=&quot;http://nathanbirrell.me/clean-javascript&quot;&gt;a presentation&lt;/a&gt; I gave on &lt;a href=&quot;https://www.amazon.com.au/Clean-Code-Robert-C-Martin/dp/0132350882&quot;&gt;Clean Code&lt;/a&gt;, applied to Javascript applications.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;This post is inspired by Martin Cronjé’s talk at LASTConf 2016 called “Establishing craftsmanship culture in a team.” The premise was that we have an education problem in software engineering: learning is unstructured, ad-hoc and programming is not treated as a “craft” in most organisations.&lt;/p&gt;
&lt;p&gt;Martin gave a few ideas on how to improve this, namely regular pair programming, deliberate practice (code retreats, coder dojos, etc.) and of course reading and sharing – which is what I’m doing here. These are my notes on chapters 1–4 of Robert C Martin’s &lt;em&gt;Clean Code&lt;/em&gt;, applied to Javascript.&lt;/p&gt;
&lt;h2&gt;Clean Code&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Clean code:&lt;/strong&gt; code that is maintainable, readable, simple and tested. Developers always face this eternal balancing act, that is, we know mess slows us down, yet we feel pressure to make messes in order to meet deadlines. In other words: we don’t make time to go fast.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/wtf-8f98eea132dda41a67111e56a775ffbd-7301f.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 537px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 92.17877094972066%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5ElEQVQ4y5WU6W4CMQyEef+3g59IINj75L6Wy+znatItRapqyUrWscf2xNmR9XI6nVyfzyefYX3f/yX4jticz2fb7Xa22Wzser36vm1bu1wutt/vbbvdupIUn7qurWkaV/zwv91uDuqABBZF4UGsWZbZer22OI6tqioH4BtwbOhyubQkSSzPc48BIwCqquPxaKvVyqvAARD2AB0OBz/XyhkFEEcM1Tvgfzj6xNlwHzj8dCCV3O/3wNOwoveCHPDxeDi5Qyc50jJt0hqtCxDe5E98uGUFwpkOhsIFcCkIoPCNLzYSsTIlP8aGzNwsAThBNqQj8/ncx4NkURR5dYCwpmnqF/SLQ4IJYgRwppWyLB1ksVh42/CHjaQkJzFtY1PyAEhFBE4mE5tOp34BgJN9Npt5AODY+B6Px54E1RyKOgfUhVCFhpzMCG1SNYAAwyGKjTP4Gz7ZAIiTjOINoT2CqZpOJIDRFWeyB0AIFqAOSIJAPM9PFQ59aFeT0TatJ3VA2lPpONC2WgYQCrquc840dyiJNBkAQpnPoYZXb5ZKdBEA8hMAECqoSj8RfLg4TUUA5ECzhQOHmi+CSaJ5xQ492DXQSF3V34D0jmpfFnn/e4qsyAuvMOs17avMsvyr4jgJNLy//xe2h286wX4s0wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Code quality: number of WTFs per minute&quot;
        title=&quot;Code quality: number of WTFs per minute&quot;
        src=&quot;/static/wtf-8f98eea132dda41a67111e56a775ffbd-7301f.png&quot;
        srcset=&quot;/static/wtf-8f98eea132dda41a67111e56a775ffbd-aed24.png 148w,
/static/wtf-8f98eea132dda41a67111e56a775ffbd-dbd3c.png 295w,
/static/wtf-8f98eea132dda41a67111e56a775ffbd-7301f.png 537w&quot;
        sizes=&quot;(max-width: 537px) 100vw, 537px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;!-- &lt;small&gt;Code quality: number of WTFs per minute&lt;/small&gt; --&gt;
&lt;p&gt;Every programmer has been slowed down by someone else’s – or, more likely, their own – messy code.&lt;/p&gt;
&lt;h3&gt;The total cost of owning a mess&lt;/h3&gt;
&lt;p&gt;“Fast teams” in the beginning become slow with complex, tangled and fragile codebases. All due to unforeseen consequences of scope changes, tight schedules, poor code readability, onboarding becomes a nightmare, the list goes on…&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/mess-fb97aa4b05c7ea0f06cdd00694d6a9af-bf397.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 397px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.42317380352645%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABhElEQVQoz4VS127CUAzN/38BSOwhsfcvlJemCi9IjBIlpUgESBgBQlTC6bXRjVJEW0uW41z7+HgoELJer7FcLmHbNna7Hbbb7VN9fIv6+/0eQRBAIUB60DQN8Xgc5XIZ9Xod1Wo1tLVa7VefviuVCnq9Hi6XCxTLsjAcDjGZTFAsFhGLxTiQgCmJgsmSL5OlT5a0VCqh2+3eAWezGVRVxXQ65cdUKoV0Oh2ykYnPACXTH4CGYWAwGICAZVAikUAymUSj0WBgstFWJXPpU14ISMvQdR2j0YgfoqDUPjHO5/M8DgkmmT6dIS3F932Mx2O0Wi3WdruNTqeDZrOJQqGATCbDNpfLMXMaCVn6n81m2VIhz/PugLTu4/EI13VDPRwObD1RlQKpi/l8zv/pKuTJOI6DzWbDJ8dnc7vd8Jecz2cE16tY2jvf6n/CDAk0qiQ0j9PphDf1Ff2XPgzTFGzsewHB5DFHqvJYQQK6ojVdbN40P/C5WGBlrYRaMMVVfAnG0diofANKxflETxllJgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Severe diminishing returns on productivity over time&quot;
        title=&quot;Severe diminishing returns on productivity over time&quot;
        src=&quot;/static/mess-fb97aa4b05c7ea0f06cdd00694d6a9af-bf397.png&quot;
        srcset=&quot;/static/mess-fb97aa4b05c7ea0f06cdd00694d6a9af-18087.png 148w,
/static/mess-fb97aa4b05c7ea0f06cdd00694d6a9af-ea495.png 295w,
/static/mess-fb97aa4b05c7ea0f06cdd00694d6a9af-bf397.png 397w&quot;
        sizes=&quot;(max-width: 397px) 100vw, 397px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;The boy scout rule&lt;/h3&gt;
&lt;p&gt;It’s a programmer’s job to defend the code, in the same way a manager defends their schedule and requirements. An easy way to start this is the boy scout rule:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Leave the campground cleaner than you found it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Meaningful names&lt;/h2&gt;
&lt;p&gt;Names of variables, functions and classes should:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;be meaningful&lt;/li&gt;
&lt;li&gt;be intention-revealing&lt;/li&gt;
&lt;li&gt;be pronounceable&lt;/li&gt;
&lt;li&gt;avoid disinformation (for example: accidental similarities, subtle name differences, puns)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In general:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;use longer names for things with larger scope, it helps with searchability&lt;/li&gt;
&lt;li&gt;use nouns for classes/objects, verbs for functions/methods&lt;/li&gt;
&lt;li&gt;be consistent when naming around similar concepts (for example: ‘handle’ prefix before component event-handler methods in &lt;code class=&quot;language-text&quot;&gt;handleSubmit&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;don’t hesistate to change poor names globally. People are often afraid of renaming things for fear of objections, but we should be grateful when names change for the better.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Good naming requires good descriptive skills and a shared cultural background in a team. It’s certainly not a &lt;em&gt;technical&lt;/em&gt; issue as much as it is a teaching one.&lt;/p&gt;
&lt;h2&gt;Functions&lt;/h2&gt;
&lt;p&gt;A few useful guides on writing functions.&lt;/p&gt;
&lt;h3&gt;Make them smaller&lt;/h3&gt;
&lt;p&gt;The first rule of functions is that they ought to be &lt;strong&gt;small&lt;/strong&gt;. The second rule: even smaller. Functions can never be too small.&lt;/p&gt;
&lt;p&gt;Whilst this certainly makes a lot of sense in Java Land (this book is primarily based on Java examples), it holds true irrespective of your chosen technology.&lt;/p&gt;
&lt;h3&gt;One-line blocks&lt;/h3&gt;
&lt;p&gt;While I consider this one a bit extreme, it’s certainly a useful experiment: &lt;strong&gt;Keep blocks inside &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;else&lt;/code&gt;, and loops to one line.&lt;/strong&gt; The idea here being that it keeps your block tidy and provides documentary value, thanks to the descriptive naming.&lt;/p&gt;
&lt;p&gt;Practically, this one is hard to achieve, but more often than not you can break chunks of your block-level logic down.&lt;/p&gt;
&lt;h3&gt;Do one thing&lt;/h3&gt;
&lt;p&gt;Functions that do one thing read better, are far easier to test and are usually more predictable. &lt;a href=&quot;https://en.wikipedia.org/wiki/Pure_function&quot;&gt;Pure functions&lt;/a&gt; come into play here for Javascript developers, avoiding side effects where you can is almost always a good idea.&lt;/p&gt;
&lt;h3&gt;Abstraction&lt;/h3&gt;
&lt;p&gt;In general, it’s best to keep to one level of abstraction per function. From a reader’s perspective, this helps discern whether parts of expressions are essential concepts or details.&lt;/p&gt;
&lt;h3&gt;Read top-to-bottom&lt;/h3&gt;
&lt;p&gt;Functions should read like a narrative, in a logical top-to-bottom order.&lt;/p&gt;
&lt;h3&gt;Switch statements&lt;/h3&gt;
&lt;p&gt;Tricky to do &lt;em&gt;one&lt;/em&gt; thing, by nature switch statements do &lt;code class=&quot;language-text&quot;&gt;n&lt;/code&gt; things. Bury these in deeper/low-level functions.&lt;/p&gt;
&lt;h3&gt;Don’t repeat yourself (DRY)&lt;/h3&gt;
&lt;p&gt;Everyone should know &lt;a href=&quot;https://en.wikipedia.org/wiki/Don%27t_repeat_yourself&quot;&gt;this&lt;/a&gt; one.&lt;/p&gt;
&lt;!-- TODO: add notes on side effects, arguments and exceptions &gt; error codes --&gt;
&lt;h2&gt;Comments&lt;/h2&gt;
&lt;p&gt;At best, comments are a necessary evil.&lt;/p&gt;
&lt;p&gt;Why?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;comments often lie because programmers can’t realistically maintain them&lt;/li&gt;
&lt;li&gt;comments don’t make up for bad code&lt;/li&gt;
&lt;li&gt;clear/expressive code with few comments is always better than complex code with lots of comments&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Some legitimate use cases for comments:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;legal comments, licensing and the like&lt;/li&gt;
&lt;li&gt;explanation of intent&lt;/li&gt;
&lt;li&gt;clarification of obsure code or workarounds&lt;/li&gt;
&lt;li&gt;warning of consequences&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;TODO&lt;/code&gt;s&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In general, if you feel you need to comment, try improving/adding a function or variable name instead.&lt;/p&gt;
&lt;h2&gt;Write code for humans, not computers&lt;/h2&gt;
&lt;p&gt;Hopefully these notes give you some ideas for your daily practice. The eternal tradeoff between short-term loss and long-term benefits will remain persistent, but remember: write code for humans, not computers.&lt;/p&gt;
&lt;p&gt;As this is only the first four chapters, to read on about formatting, objects and data structures, error handling, boundaries, unit tests and concurrency, go on to read &lt;a href=&quot;https://www.amazon.com.au/Clean-Code-Robert-C-Martin/dp/0132350882&quot;&gt;Clean Code&lt;/a&gt; yourself.&lt;/p&gt;
&lt;p&gt;&lt;small&gt;👏🏼 Thanks to &lt;a href=&quot;http://taylorbett.github.io/&quot;&gt;Taylor Bett&lt;/a&gt; for proof reading this transcript&lt;/small&gt;&lt;/p&gt;</content:encoded></item></channel></rss>